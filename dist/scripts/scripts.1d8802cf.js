"use strict";var app=angular.module("newApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch","ngParallax","ui.router","ui.bootstrap","angular-jwt","ngMessages","google.places"]).run(["$rootScope","$state","$location","$http","$timeout",function(a,b,c,d,e){c.absUrl().split("!")[0];a.path=c.path(),sessionStorage.isUserLoggedIn&&0!=sessionStorage.isUserLoggedIn?a.user=JSON.parse(sessionStorage.getItem("user")):(localStorage.Authorization="guest",delete sessionStorage.isUserLoggedIn,delete sessionStorage.user,delete a.user),d.defaults.headers.common.Authorization=localStorage.getItem("Authorization"),d.defaults.headers.common["Content-Type"]="application/json"}]).config(["$urlRouterProvider","$provide","$qProvider","$stateProvider","$locationProvider","$httpProvider","jwtOptionsProvider",function(a,b,c,d,e,f,g){localStorage.getItem("Authorization")||localStorage.setItem("Authorization","guest"),c.errorOnUnhandledRejections(!1),g.config({authPrefix:"",whiteListedDomains:["192.168.0.158"],tokenGetter:function(){return"guest"|localStorage.getItem("Authorization")}}),f.interceptors.push("jwtInterceptor"),f.interceptors.push(["$q",function(a){return{responseError:function(b){var c=a.defer();return 401==b.status&&(console.log("401"),localStorage.setItem("Authorization","guest"),delete sessionStorage.isUserLoggedIn,delete sessionStorage.user,delete $rootScope.user,delete $rootScope.isUserLoggedIn,$rootScope.$broadcast("user"),$rootScope.$broadcast("isUserLoggedIn"),window.reload(),$state.reload($rootScope.currentState,$rootScope.currentParams)),c.reject(b),c.promise}}}]);d.state({name:"home",url:"/",templateUrl:"views/main.html",controller:"mainCtrl"}).state({name:"about",url:"/about",templateUrl:"views/about.html",controller:"AboutCtrl"}).state({name:"register",url:"/register",controller:"RegisterCtrl",templateUrl:"views/register.html"}).state({name:"login",url:"/login",controller:"LoginCtrl",templateUrl:"views/login.html"}).state({name:"logout",url:"/logout",controller:"LogoutCtrl"}),a.otherwise("/404"),e.html5Mode(!0)}]),app="undefined"!=typeof app?app:{};app.constant("ENV",{HOST:"http://192.168.0.158:8989",API:"http://192.168.0.158:8989/api/"});var app="undefined"!=typeof app?app:{};app.controller("mainCtrl",["jwtHelper","$rootScope","$scope","$state","PostService",function(a,b,c,d,e){console.log("***** Main controller *****"),b.$on("$stateChangeSuccess",function(a,c,d,e,f){b.previousState=e.name,b.currentState=c.name,b.fromParams=f,b.currentParams=d}),b.checkAuth=function(){return sessionStorage.user?(b.user=JSON.parse(sessionStorage.getItem("user")),b.$broadcast("user"),!0):(delete b.user,delete b.isUserLoggedIn,b.$broadcast("user"),b.$broadcast("isUserLoggedIn"),d.go("login",{},{reload:!0}),location.reload(!0),void 0)};var f=e.loadposts();f.then(function(a){0==a.data.error_code?c.posts=a.data.data:c.err=a.data.message},function(a){console.log(a)})}]).controller("LoginCtrl",["$scope","$rootScope","$http","ENV","$state","UserService",function(a,b,c,d,e,f){console.log("***** Login controller *****"),f.UserLogout(),angular.extend(a,{login:function(c){f.login(a.login,function(c){c.then(function(c){if(0==c.data.error_code){var d=c.data.data;f.setUser(d),""==b.previousState?e.go("home",{},{reload:!0}):e.go(b.previousState,{},{reload:!0}),location.reload(!0)}else a.errors=c.data.message})})}})}]).controller("LogoutCtrl",["$scope","$rootScope","$state","UserService",function(a,b,c,d){console.log("***** Logout controller *****"),d.UserLogout(b.user),c.go("home",{},{reload:!0}),location.reload(!0)}]).controller("RegisterCtrl",["$rootScope","$scope","$state","UserService",function(a,b,c,d){console.log("***** Registration controller *****"),angular.extend(b,{registration:function(){b.register=angular.merge({},b.register,{device_type:"web",device_token:"192.168.0.158"}),d.register(b.register,function(a){a.then(function(a){if(0==a.data.error_code){var e=a.data.data;d.setUser(e),c.go("home",{},{reload:!0}),location.reload(!0)}else 1==a.data.error_code&&(b.err=a.data.message)})})}})}]).controller("headerCtrl",["$scope","$rootScope","$uibModal",function(a,b,c){console.log("***** Haeder Controller *****"),b.isUserLoggedIn=sessionStorage.isUserLoggedIn,a.user=b.user,a.addnewpost=function(){console.log("***** Add New Post Form *****"),b.checkAuth(),c.open({animation:!0,ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"views/addpost.html",controller:"addpostmodal",scope:a}).result.then(function(a){0==a?console.log(0==a):console.log(0==a)})}}]).controller("AboutCtrl",["$scope",function(a){console.log("***** About Controller *****"),a.awesomeThings="test",this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]).controller("addpostmodal",["$scope","$uibModalInstance","PostService",function(a,b,c){a.err=!1,a.addpost=function(d){console.log("***** Function to add Post *****");var e=c.add(d);e.then(function(c){0==c.data.error_code?b.close():a.err=c.data.message,location.reload(!0)},function(a){console.log(a)})}}]);var app="undefined"!=typeof app?app:{};app.factory("UserService",["$http","ENV","$rootScope",function(a,b,c){function d(a){return console.log(a),a}function e(a){return function(){return{success:!1,message:a}}}var f={};return f.register=function(c,f){f(a({url:b.API+"user/register",method:"POST",data:c}).then(d,e))},f.setUser=function(a){return sessionStorage.isUserLoggedIn=!0,localStorage.setItem("Authorization",a.token),sessionStorage.setItem("user",JSON.stringify(a))},f.login=function(c,f){f(a({url:b.API+"user/login",method:"POST",data:{email:c.email,password:c.password,device_type:"web"}}).then(d,e))},f.UserLogout=function(){return localStorage.setItem("Authorization","guest"),delete sessionStorage.isUserLoggedIn,delete sessionStorage.user},f}]).factory("PostService",["$http","ENV",function(a,b){function c(a){return a}function d(a){return function(){return{success:!1,message:a}}}var e={};return e.add=function(e){return a({url:b.API+"posts",method:"POST",data:e}).then(c,d)},e.loadposts=function(){return a({url:b.API+"posts",method:"GET"}).then(c,d)},e}]),angular.module("newApp").run(["$templateCache",function(a){a.put("views/about.html","<p>This is the about view.</p> <h3>{{awesomeThings}}</h3>"),a.put("views/addpost.html",'<section id="page-header" class="section background"> <div class="container"> <div class="row"> <div class="col-sm-12"> <h3>Add New Post</h3> </div> </div><!-- end row --> </div><!-- end container --> </section><!-- end section --> <section class="section clearfix"> <div class="container"> <div class="row"> <div id="fullwidth" class="col-sm-12"> <!-- START CONTENT --> <div class="row"> <div id="content" class="col-md-12 col-sm-12 col-xs-12"> <div class="post-wrapper row clearfix"> <div class="col-md-7 col-sm-12 col-xs-12 form-post"> <form name="addpost_form" class="form-horizontal" role="form" method="POST" ng-submit="addpost(post)"> <div class="form-group" ng-class="{ \'has-error\':addpost_form.title.$touched && addpost_form.title.$invalid}"> <label for="title" class="col-sm-3 control-label">Post Title:</label> <div class="col-sm-7"> <input id="title" type="text" class="form-control" name="title" value="" placeholder="Enter Post Title" ng-model="post.title" required> <span class="help-block" ng-show="addpost_form.title.$invalid && addpost_form.title.$touched"> <strong>Please Enter Post title</strong> </span> </div> </div> <div class="form-group" ng-class="{ \'has-error\':addpost_form.description.$touched && addpost_form.description.$invalid}"> <label for="description" class="col-sm-3 control-label">Post Description:</label> <div class="col-sm-7"> <textarea id="description" name="description" class="form-control" rows="3" placeholder="Enter Post Description" ng-model="post.description" required></textarea> <span class="help-block" ng-show="addpost_form.description.$invalid && addpost_form.description.$touched"> <strong>Please Enter Post Description</strong> </span> </div> </div> <div class="form-group"> <div class="col-sm-offset-3 col-sm-4"> <button type="submit" class="btn btn-warning btn-block" ng-disabled="addpost_form.$invalid"> Add New Post </button> </div> </div> </form> </div> </div><!-- end col --> </div><!-- end post-wrapper --> </div><!-- end col --> </div><!-- end row --> <!-- END CONTENT --> </div><!-- end row --> </div><!-- end container --> </section><!-- end section -->'),a.put("views/login.html",'<style>.footer {\n        width:100% !important;\n        position:absolute !important;\n        bottom: 0 !important;\n    }</style> <section id="page-header" class="section background"> <div class="container"> <div class="row"> <div class="col-sm-12"> <h3>Login</h3> </div> </div><!-- end row --> </div><!-- end container --> </section><!-- end section --> <section class="section clearfix"> <div class="container"> <div class="row"> <div id="fullwidth" class="col-sm-12"> <!-- START CONTENT --> <div class="row"> <div id="content" class="col-md-12 col-sm-12 col-xs-12"> <div class="post-wrapper row clearfix"> <div class="col-md-6 col-sm-12 col-xs-12 form-cust container-data"> <form name="loginform" ng-controller="LoginCtrl" ng-submit="login(loginform)" class="form-horizontal" role="form" method="POST"> <div class="form-group" ng-class="{ \'has-error\':errors || loginform.email.$error.email || loginform.email.$touched && loginform.email.$invalid }"> <label for="email" class="col-sm-2 control-label">Email:</label> <div class="col-sm-10"> <input id="email" type="email" class="form-control" name="email" value="{{ login.email}}" placeholder="Enter Your Email Address" ng-model="login.email" required> <span class="help-block" ng-messages="loginform.$error" role="alert"> <strong ng-show="loginform.email.$error.email">Please Enter Valid Email</strong> </span> <span class="help-block" ng-show="errors"> <strong>{{errors}}</strong> </span> </div> </div> <div class="form-group" ng-class="{ \'has-error\': loginform.password.$touched && loginform.password.$invalid }"> <label for="password" class="col-sm-2 control-label">Password:</label> <div class="col-sm-10"> <input id="password" type="password" class="form-control" name="password" placeholder="password" ng-model="login.password" required ng-minlength="6"> <span class="help-block" ng-messages="loginF.$error" role="alert"> <strong ng-show="loginform.password.$error.minlength">Password You have Entered is too Small</strong> </span> <span class="help-block" ng-show="loginform.password.$invalid && loginform.password.$touched"> <strong>Password must be 6 character long.</strong> </span> </div> </div> <div class="form-group"> <div class="col-sm-offset-2 col-sm-4"> <button type="submit" class="btn btn-primary btn-block" ng-disabled="loginform.$invalid"> Login </button> </div> </div> </form> </div><!-- end col --> </div><!-- end post-wrapper --> </div><!-- end col --> </div><!-- end row --> <!-- END CONTENT --> </div><!-- end fullwidth --> </div><!-- end row --> </div><!-- end container --> </section><!-- end section -->'),a.put("views/main.html",'<div class="section"> <div class="container"> <div class="row"> <div class="col-md-12"> </div> </div> </div> </div> <div class="section"> <div class="container"> <div class="row"> <div class="col-sm-12"> <img class="img-responsive" src="images/AngularJS_Banner.674a8c82.jpg"> </div> <div class="col-sm-12"> <div class="blog-post"> <div class="col-sm-12 latest-news"> <h2 class="text-center">Latest Posts</h2> <div ng-repeat="post in posts"> <div class="row"> <div class="col-sm-12"> <div class="caption"><a>{{post.title}}</a></div> <div class="date">{{post.created_at}}</div> <div class="intro">{{post.description}}</div> </div> </div> </div> </div> </div> </div> </div> </div> </div>'),a.put("views/partials/footer.html",'<div class="container"> <div class="row"> <div class="col-md-12"> <div class="footer-copyright">&copy; 2017 :: A Sample AngularJs Project. By <a href="https://qodors.com">Qodors</a>.</div> </div> </div> </div>'),a.put("views/partials/header.html",'<header class="navbar navbar-inverse navbar-fixed-top" role="banner" ng-controller="headerCtrl"> <div class="container"> <div class="navbar-header"> <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button> <a class="navbar-brand" ui-sref="home">AngularJS</a> </div> <div class="collapse navbar-collapse"> <ul class="nav navbar-nav navbar-right"> <li><a ui-sref="home">Home</a></li> <li ng-if="isUserLoggedIn"> <a ng-click="addnewpost()" class="" style="cursor: pointer">Add New Post</a> </li> <li ng-show="!isUserLoggedIn || isUserLoggedIn === false"><a ui-sref="register">Register</a></li> <li ng-show="!isUserLoggedIn || isUserLoggedIn === false"><a ui-sref="login">Login</a></li> <li class="dropdown" ng-show="isUserLoggedIn"> <a href="#" class="text-white block dropdown-toggle" data-toggle="dropdown" aria-expanded="false"> <img class="image img-circle img-sm img-bordered-sm" src="{{user.user_profile}}" style="height: 30px;position: relative"> <span class="font-sm text-white">{{user.first_name + \' \' + user.last_name}}</span> </a> <ul class="dropdown-menu" role="menu"> <li><a class="block" ui-sref="logout"><i class="fa fa-btn fa-sign-out line-height-0"></i> Logout</a></li> </ul> </li> </ul> </div> </div> </header>'),a.put("views/register.html",'<style>.footer {\n        width:100% !important;\n        position:absolute !important;\n        bottom: 0 !important;\n    }</style> <section id="page-header" class="section background"> <div class="container"> <div class="row"> <div class="col-sm-12"> <h3>Registration</h3> </div> </div><!-- end row --> </div><!-- end container --> </section><!-- end section --> <section class="section clearfix"> <div class="container"> <div class="row"> <div id="fullwidth" class="col-sm-12"> <!-- START CONTENT --> <div class="row"> <div id="content" class="col-md-12 col-sm-12 col-xs-12"> <div class="post-wrapper row clearfix"> <div class="col-md-7 col-sm-12 col-xs-12 form-cust"> <form name="registration_form" class="form-horizontal" role="form" method="POST" ng-submit="registration()"> <div class="form-group" ng-class="{ \'has-error\':registration_form.first_name.$touched && registration_form.first_name.$invalid || registration_form.last_name.$touched && registration_form.last_name.$invalid}"> <label for="first_name" class="col-sm-3 control-label">Your Name:</label> <div class="col-sm-4"> <input id="first_name" type="text" class="form-control" name="first_name" value="" placeholder="first name" ng-model="register.first_name" required> <span class="help-block" ng-show="registration_form.first_name.$invalid && registration_form.first_name.$touched"> <strong>Please Enter First name</strong> </span> </div> <div class="col-sm-4"> <input id="last_name" type="text" class="form-control" name="last_name" value="" placeholder="last name" ng-model="register.last_name" required> <span class="help-block" ng-show="registration_form.last_name.$invalid && registration_form.last_name.$touched"> <strong>Please Enter Last name</strong> </span> </div> </div> <div class="form-group"> <label class="col-sm-3 control-label">Gender:</label> <div class="col-sm-8"> <input type="radio" name="gender" value="male" ng-model="register.gender"> Male <input type="radio" name="gender" value="female" ng-model="register.gender"> Female </div> </div> <div class="form-group" ng-class="{ \'has-error\':errors.key === \'email\' || err || registration_form.emai.$error.email || registration_form.email.$touched && registration_form.email.$invalid}"> <label for="email" class="col-sm-3 control-label">EMail Address:</label> <div class="col-sm-8"> <input id="email" type="email" class="form-control" name="email" value="" placeholder="abc@xyz.com" ng-model="register.email" required> <span class="help-block" ng-messages="registration_form.$error" role="alert"> <strong ng-show="registration_form.email.$error.email">Not a valid email</strong> </span> <span class="help-block" ng-show="registration_form.email.$touched && registration_form.email.$invalid"> <strong>Please Enter valid email</strong> </span> <span class="help-block" ng-show="errors.key === \'email\'"> <strong>{{errors.message}}</strong> </span> <span class="help-block" ng-show="err"> <strong>{{err}}</strong> </span> </div> </div> <div class="form-group" ng-class="{ \'has-error\':errors.key === \'password\' || registration_form.password.$error.minlength || registration_form.password.$touched && registration_form.password.$invalid}"> <label for="password" class="col-sm-3 control-label">Password:</label> <div class="col-sm-8"> <input id="password" type="password" class="form-control" name="password" placeholder="Enter minimum 6 digits password" ng-model="register.password" required ng-minlength="6"> <span class="help-block" ng-messages="registration_form.$error" role="alert"> <strong ng-show="registration_form.password.$error.minlength">Too small password</strong> </span> <span class="help-block" ng-show="registration_form.password.$invalid && registration_form.password.$touched"> <strong>Please Enter valid password</strong> </span> </div> </div> <div class="form-group" ng-class="{ \'has-error\': registration_form.password_confirmation.$error.minlength || registration_form.password_confirmation.$touched && registration_form.password_confirmation.$invalid}"> <label for="password-confirm" class="col-sm-3 control-label">Confirm Password:</label> <div class="col-sm-8"> <input id="password-confirm" type="password" class="form-control" name="password_confirmation" placeholder="confirm password" ng-model="register.password_confirmation" required compare-to="register.password"> <span class="help-block" ng-show="registration_form.password_confirmation.$touched && registration_form.password_confirmation.$invalid"> <strong>Confirm password must be same as Password.</strong> </span> </div> </div> <div class="form-group"> <div class="col-sm-8"> <button type="submit" class="btn btn-warning btn-normal pull-right" ng-disabled="registration_form.$invalid"> Register As New Blogger </button> </div> </div> </form> </div> </div><!-- end col --> </div><!-- end post-wrapper --> </div><!-- end col --> </div><!-- end row --> <!-- END CONTENT --> </div><!-- end row --> </div><!-- end container --> </section><!-- end section -->')}]);